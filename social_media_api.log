2024-01-16T11:05:26.748Z | INFO     | uvicorn.error:60 - Application startup complete.
2024-01-16T11:06:16.414Z | DEBUG    | social_media_api.routers.post:36 - SELECT posts.id, posts.body 
FROM posts
2024-01-16T11:06:16.434Z | INFO     | uvicorn.access:496 - 127.0.0.1:57212 - "GET /post HTTP/1.1" 200
2024-01-16T11:13:34.246Z | INFO     | uvicorn.error:264 - Shutting down
2024-01-16T11:13:34.355Z | INFO     | uvicorn.error:65 - Waiting for application shutdown.
2024-01-16T11:13:34.360Z | INFO     | uvicorn.error:76 - Application shutdown complete.
2024-01-16T11:13:34.363Z | INFO     | uvicorn.error:86 - Finished server process [2509]
2024-01-16T11:13:41.776Z | INFO     | uvicorn.error:60 - Application startup complete.
2024-01-16T11:14:27.833Z | INFO     | uvicorn.error:264 - Shutting down
2024-01-16T11:14:27.937Z | INFO     | uvicorn.error:65 - Waiting for application shutdown.
2024-01-16T11:14:27.942Z | INFO     | uvicorn.error:76 - Application shutdown complete.
2024-01-16T11:14:27.945Z | INFO     | uvicorn.error:86 - Finished server process [5115]
2024-01-16T11:14:35.095Z | INFO     | uvicorn.error:60 - Application startup complete.
2024-01-16T11:16:10.496Z | INFO     | social_media_api.routers.post:31 - Creating post
2024-01-16T11:16:10.503Z | DEBUG    | social_media_api.routers.post:36 - INSERT INTO posts (body) VALUES (:body)
2024-01-16T11:16:10.573Z | INFO     | uvicorn.access:496 - 127.0.0.1:54754 - "POST /post HTTP/1.1" 201
2024-01-16T11:16:38.152Z | INFO     | social_media_api.routers.post:55 - Creating comment
2024-01-16T11:16:38.158Z | INFO     | social_media_api.routers.post:20 - Finding post with id 1
2024-01-16T11:16:38.164Z | DEBUG    | social_media_api.routers.post:24 - SELECT posts.id, posts.body 
FROM posts 
WHERE posts.id = :id_1
2024-01-16T11:16:38.195Z | DEBUG    | social_media_api.routers.post:65 - INSERT INTO comments (body, post_id) VALUES (:body, :post_id)
2024-01-16T11:16:38.234Z | INFO     | uvicorn.access:496 - 127.0.0.1:58314 - "POST /comment HTTP/1.1" 201
2024-01-16T11:17:15.051Z | INFO     | social_media_api.routers.post:44 - Getting all posts
2024-01-16T11:17:15.055Z | DEBUG    | social_media_api.routers.post:48 - SELECT posts.id, posts.body 
FROM posts
2024-01-16T11:17:15.075Z | INFO     | uvicorn.access:496 - 127.0.0.1:34316 - "GET /post HTTP/1.1" 200
2024-01-16T11:17:20.269Z | INFO     | social_media_api.routers.post:73 - Getting comments on post
2024-01-16T11:17:20.272Z | DEBUG    | social_media_api.routers.post:77 - SELECT comments.id, comments.body, comments.post_id 
FROM comments 
WHERE comments.post_id = :post_id_1
2024-01-16T11:17:20.290Z | INFO     | uvicorn.access:496 - 127.0.0.1:34324 - "GET /post/0/comment HTTP/1.1" 200
2024-01-16T11:17:54.409Z | INFO     | social_media_api.routers.post:73 - Getting comments on post
2024-01-16T11:17:54.415Z | DEBUG    | social_media_api.routers.post:77 - SELECT comments.id, comments.body, comments.post_id 
FROM comments 
WHERE comments.post_id = :post_id_1
2024-01-16T11:17:54.435Z | INFO     | uvicorn.access:496 - 127.0.0.1:38096 - "GET /post/1/comment HTTP/1.1" 200
2024-01-16T11:18:00.884Z | INFO     | social_media_api.routers.post:84 - Getting post and its comments
2024-01-16T11:18:00.887Z | INFO     | social_media_api.routers.post:20 - Finding post with id 0
2024-01-16T11:18:00.890Z | DEBUG    | social_media_api.routers.post:24 - SELECT posts.id, posts.body 
FROM posts 
WHERE posts.id = :id_1
2024-01-16T11:18:00.909Z | ERROR    | social_media_api.routers.post:88 - Post with id 0 not found
2024-01-16T11:18:00.912Z | INFO     | uvicorn.access:496 - 127.0.0.1:38110 - "GET /post/0 HTTP/1.1" 404
2024-01-16T11:18:13.176Z | INFO     | social_media_api.routers.post:84 - Getting post and its comments
2024-01-16T11:18:13.179Z | INFO     | social_media_api.routers.post:20 - Finding post with id 1
2024-01-16T11:18:13.183Z | DEBUG    | social_media_api.routers.post:24 - SELECT posts.id, posts.body 
FROM posts 
WHERE posts.id = :id_1
2024-01-16T11:18:13.206Z | INFO     | social_media_api.routers.post:73 - Getting comments on post
2024-01-16T11:18:13.208Z | DEBUG    | social_media_api.routers.post:77 - SELECT comments.id, comments.body, comments.post_id 
FROM comments 
WHERE comments.post_id = :post_id_1
2024-01-16T11:18:13.226Z | INFO     | uvicorn.access:496 - 127.0.0.1:39030 - "GET /post/1 HTTP/1.1" 200
2024-01-16T14:06:36.487Z | INFO     | uvicorn.error:264 - Shutting down
2024-01-16T14:06:36.601Z | INFO     | uvicorn.error:65 - Waiting for application shutdown.
2024-01-16T14:06:36.607Z | INFO     | uvicorn.error:76 - Application shutdown complete.
2024-01-16T14:06:36.612Z | INFO     | uvicorn.error:86 - Finished server process [5437]
2024-01-16T14:06:45.903Z | INFO     | uvicorn.error:60 - Application startup complete.
2024-01-16T14:07:15.937Z | INFO     | uvicorn.error:264 - Shutting down
2024-01-16T14:07:16.044Z | INFO     | uvicorn.error:65 - Waiting for application shutdown.
2024-01-16T14:07:16.047Z | INFO     | uvicorn.error:76 - Application shutdown complete.
2024-01-16T14:07:16.049Z | INFO     | uvicorn.error:86 - Finished server process [13933]
2024-01-16T14:07:21.878Z | INFO     | uvicorn.error:60 - Application startup complete.
2024-01-16T16:25:56.768Z | INFO     | uvicorn.error:264 - Shutting down
2024-01-16T16:25:56.910Z | INFO     | uvicorn.error:65 - Waiting for application shutdown.
2024-01-16T16:25:56.921Z | INFO     | uvicorn.error:76 - Application shutdown complete.
2024-01-16T16:25:56.925Z | INFO     | uvicorn.error:86 - Finished server process [14134]
2024-01-16T16:47:11.025Z | INFO     | [-] uvicorn.error:60 - Application startup complete.
2024-01-16T16:47:17.000Z | INFO     | [659fb8e8] social_media_api.routers.post:31 - Creating post
2024-01-16T16:47:17.006Z | DEBUG    | [659fb8e8] social_media_api.routers.post:36 - INSERT INTO posts (body) VALUES (:body)
2024-01-16T16:47:17.055Z | INFO     | [659fb8e8] uvicorn.access:496 - 127.0.0.1:45018 - "POST /post HTTP/1.1" 201
2024-01-16T16:47:17.126Z | INFO     | [d59a000c] social_media_api.routers.post:31 - Creating post
2024-01-16T16:47:17.132Z | DEBUG    | [d59a000c] social_media_api.routers.post:36 - INSERT INTO posts (body) VALUES (:body)
2024-01-16T16:47:17.188Z | INFO     | [d59a000c] uvicorn.access:496 - 127.0.0.1:45018 - "POST /post HTTP/1.1" 201
2024-01-16T16:47:17.269Z | INFO     | [51868e26] social_media_api.routers.post:31 - Creating post
2024-01-16T16:47:17.272Z | DEBUG    | [51868e26] social_media_api.routers.post:36 - INSERT INTO posts (body) VALUES (:body)
2024-01-16T16:47:17.319Z | INFO     | [51868e26] uvicorn.access:496 - 127.0.0.1:45018 - "POST /post HTTP/1.1" 201
2024-01-16T16:47:17.441Z | INFO     | [91828e7f] social_media_api.routers.post:31 - Creating post
2024-01-16T16:47:17.446Z | DEBUG    | [91828e7f] social_media_api.routers.post:36 - INSERT INTO posts (body) VALUES (:body)
2024-01-16T16:47:17.493Z | INFO     | [91828e7f] uvicorn.access:496 - 127.0.0.1:45018 - "POST /post HTTP/1.1" 201
2024-01-16T16:47:17.607Z | INFO     | [003d4a66] social_media_api.routers.post:31 - Creating post
2024-01-16T16:47:17.610Z | DEBUG    | [003d4a66] social_media_api.routers.post:36 - INSERT INTO posts (body) VALUES (:body)
2024-01-16T16:47:17.654Z | INFO     | [003d4a66] uvicorn.access:496 - 127.0.0.1:45018 - "POST /post HTTP/1.1" 201
2024-01-16T16:47:17.793Z | INFO     | [0ceaa8ba] social_media_api.routers.post:31 - Creating post
2024-01-16T16:47:17.797Z | DEBUG    | [0ceaa8ba] social_media_api.routers.post:36 - INSERT INTO posts (body) VALUES (:body)
2024-01-16T16:47:17.834Z | INFO     | [0ceaa8ba] uvicorn.access:496 - 127.0.0.1:45018 - "POST /post HTTP/1.1" 201
2024-01-16T16:47:17.950Z | INFO     | [95f99ae1] social_media_api.routers.post:31 - Creating post
2024-01-16T16:47:17.953Z | DEBUG    | [95f99ae1] social_media_api.routers.post:36 - INSERT INTO posts (body) VALUES (:body)
2024-01-16T16:47:18.019Z | INFO     | [95f99ae1] uvicorn.access:496 - 127.0.0.1:45018 - "POST /post HTTP/1.1" 201
2024-01-16T16:47:18.144Z | INFO     | [558a3bce] social_media_api.routers.post:31 - Creating post
2024-01-16T16:47:18.149Z | DEBUG    | [558a3bce] social_media_api.routers.post:36 - INSERT INTO posts (body) VALUES (:body)
2024-01-16T16:47:18.188Z | INFO     | [558a3bce] uvicorn.access:496 - 127.0.0.1:45018 - "POST /post HTTP/1.1" 201
2024-01-16T16:47:18.310Z | INFO     | [00ad5fc8] social_media_api.routers.post:31 - Creating post
2024-01-16T16:47:18.319Z | DEBUG    | [00ad5fc8] social_media_api.routers.post:36 - INSERT INTO posts (body) VALUES (:body)
2024-01-16T16:47:18.368Z | INFO     | [00ad5fc8] uvicorn.access:496 - 127.0.0.1:45018 - "POST /post HTTP/1.1" 201
2024-01-16T16:47:18.446Z | INFO     | [aa100244] social_media_api.routers.post:31 - Creating post
2024-01-16T16:47:18.450Z | DEBUG    | [aa100244] social_media_api.routers.post:36 - INSERT INTO posts (body) VALUES (:body)
2024-01-16T16:47:18.490Z | INFO     | [aa100244] uvicorn.access:496 - 127.0.0.1:45018 - "POST /post HTTP/1.1" 201
2024-01-16T16:47:18.614Z | INFO     | [5f591773] social_media_api.routers.post:31 - Creating post
2024-01-16T16:47:18.616Z | DEBUG    | [5f591773] social_media_api.routers.post:36 - INSERT INTO posts (body) VALUES (:body)
2024-01-16T16:47:18.655Z | INFO     | [5f591773] uvicorn.access:496 - 127.0.0.1:45018 - "POST /post HTTP/1.1" 201
2024-01-16T16:47:18.782Z | INFO     | [4fead768] social_media_api.routers.post:31 - Creating post
2024-01-16T16:47:18.785Z | DEBUG    | [4fead768] social_media_api.routers.post:36 - INSERT INTO posts (body) VALUES (:body)
2024-01-16T16:47:18.823Z | INFO     | [4fead768] uvicorn.access:496 - 127.0.0.1:45018 - "POST /post HTTP/1.1" 201
2024-01-16T16:47:18.958Z | INFO     | [495f14d3] social_media_api.routers.post:31 - Creating post
2024-01-16T16:47:18.963Z | DEBUG    | [495f14d3] social_media_api.routers.post:36 - INSERT INTO posts (body) VALUES (:body)
2024-01-16T16:47:19.014Z | INFO     | [495f14d3] uvicorn.access:496 - 127.0.0.1:45018 - "POST /post HTTP/1.1" 201
2024-01-16T17:18:55.457Z | INFO     | [-] uvicorn.error:264 - Shutting down
2024-01-16T17:18:55.563Z | INFO     | [-] uvicorn.error:65 - Waiting for application shutdown.
2024-01-16T17:18:55.567Z | INFO     | [-] uvicorn.error:76 - Application shutdown complete.
2024-01-16T17:18:55.570Z | INFO     | [-] uvicorn.error:86 - Finished server process [29088]
{"asctime": "2024-01-16T17:20:35", "msecs": 648.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 60, "message": "Application startup complete."}
{"asctime": "2024-01-16T17:21:02", "msecs": 981.0, "levelname": "INFO", "correlation_id": "b3b9b532", "name": "social_media_api.routers.post", "lineno": 31, "message": "Creating post"}
{"asctime": "2024-01-16T17:21:02", "msecs": 987.0, "levelname": "DEBUG", "correlation_id": "b3b9b532", "name": "social_media_api.routers.post", "lineno": 36, "message": "INSERT INTO posts (body) VALUES (:body)"}
{"asctime": "2024-01-16T17:21:03", "msecs": 31.0, "levelname": "INFO", "correlation_id": "b3b9b532", "name": "uvicorn.access", "lineno": 496, "message": "127.0.0.1:42912 - \"POST /post HTTP/1.1\" 201"}
{"asctime": "2024-01-16T17:21:03", "msecs": 172.0, "levelname": "INFO", "correlation_id": "6e82dd29", "name": "social_media_api.routers.post", "lineno": 31, "message": "Creating post"}
{"asctime": "2024-01-16T17:21:03", "msecs": 176.0, "levelname": "DEBUG", "correlation_id": "6e82dd29", "name": "social_media_api.routers.post", "lineno": 36, "message": "INSERT INTO posts (body) VALUES (:body)"}
{"asctime": "2024-01-16T17:21:03", "msecs": 217.0, "levelname": "INFO", "correlation_id": "6e82dd29", "name": "uvicorn.access", "lineno": 496, "message": "127.0.0.1:42912 - \"POST /post HTTP/1.1\" 201"}
{"asctime": "2024-01-16T17:21:12", "msecs": 320.0, "levelname": "INFO", "correlation_id": "a65ca00c", "name": "social_media_api.routers.post", "lineno": 31, "message": "Creating post"}
{"asctime": "2024-01-16T17:21:12", "msecs": 324.0, "levelname": "DEBUG", "correlation_id": "a65ca00c", "name": "social_media_api.routers.post", "lineno": 36, "message": "INSERT INTO posts (body) VALUES (:body)"}
{"asctime": "2024-01-16T17:21:12", "msecs": 360.0, "levelname": "INFO", "correlation_id": "a65ca00c", "name": "uvicorn.access", "lineno": 496, "message": "127.0.0.1:48898 - \"POST /post HTTP/1.1\" 201"}
{"asctime": "2024-01-17T11:14:09", "msecs": 424.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 60, "message": "Application startup complete."}
{"asctime": "2024-01-17T11:17:24", "msecs": 294.0, "levelname": "INFO", "correlation_id": "eb9f0888", "name": "social_media_api.routers.post", "lineno": 31, "message": "Creating post"}
{"asctime": "2024-01-17T11:17:24", "msecs": 299.0, "levelname": "DEBUG", "correlation_id": "eb9f0888", "name": "social_media_api.routers.post", "lineno": 36, "message": "INSERT INTO posts (body) VALUES (:body)"}
{"asctime": "2024-01-17T11:17:24", "msecs": 346.0, "levelname": "INFO", "correlation_id": "eb9f0888", "name": "uvicorn.access", "lineno": 496, "message": "127.0.0.1:50976 - \"POST /post HTTP/1.1\" 201"}
{"asctime": "2024-01-17T11:17:24", "msecs": 452.0, "levelname": "INFO", "correlation_id": "d54cd114", "name": "social_media_api.routers.post", "lineno": 31, "message": "Creating post"}
{"asctime": "2024-01-17T11:17:24", "msecs": 457.0, "levelname": "DEBUG", "correlation_id": "d54cd114", "name": "social_media_api.routers.post", "lineno": 36, "message": "INSERT INTO posts (body) VALUES (:body)"}
{"asctime": "2024-01-17T11:17:24", "msecs": 500.0, "levelname": "INFO", "correlation_id": "d54cd114", "name": "uvicorn.access", "lineno": 496, "message": "127.0.0.1:50976 - \"POST /post HTTP/1.1\" 201"}
{"asctime": "2024-01-17T11:17:26", "msecs": 338.0, "levelname": "INFO", "correlation_id": "775b8e16", "name": "social_media_api.routers.post", "lineno": 44, "message": "Getting all posts"}
{"asctime": "2024-01-17T11:17:26", "msecs": 344.0, "levelname": "DEBUG", "correlation_id": "775b8e16", "name": "social_media_api.routers.post", "lineno": 48, "message": "SELECT posts.id, posts.body \nFROM posts"}
{"asctime": "2024-01-17T11:17:26", "msecs": 372.0, "levelname": "INFO", "correlation_id": "775b8e16", "name": "uvicorn.access", "lineno": 496, "message": "127.0.0.1:50976 - \"GET /post HTTP/1.1\" 200"}
{"asctime": "2024-01-17T11:54:56", "msecs": 152.0, "levelname": "ERROR", "correlation_id": "-", "name": "uvicorn.error", "lineno": 121, "message": "Traceback (most recent call last):\n  File \"/home/isetti/.pyenv/versions/3.11.7/lib/python3.11/logging/config.py\", line 783, in add_handlers\n    logger.addHandler(self.config['handlers'][h])\n                      ~~~~~~~~~~~~~~~~~~~~~~~^^^\n  File \"/home/isetti/.pyenv/versions/3.11.7/lib/python3.11/logging/config.py\", line 336, in __getitem__\n    value = dict.__getitem__(self, key)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^\nKeyError: 'rotatin_file'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/isetti/.pyenv/versions/3.11.7/lib/python3.11/logging/config.py\", line 627, in configure\n    self.configure_logger(name, loggers[name])\n  File \"/home/isetti/.pyenv/versions/3.11.7/lib/python3.11/logging/config.py\", line 808, in configure_logger\n    self.common_logger_config(logger, config, incremental)\n  File \"/home/isetti/.pyenv/versions/3.11.7/lib/python3.11/logging/config.py\", line 800, in common_logger_config\n    self.add_handlers(logger, handlers)\n  File \"/home/isetti/.pyenv/versions/3.11.7/lib/python3.11/logging/config.py\", line 785, in add_handlers\n    raise ValueError('Unable to add handler %r' % h) from e\nValueError: Unable to add handler 'rotatin_file'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 705, in lifespan\n    async with self.lifespan_context(app) as maybe_state:\n  File \"/home/isetti/.pyenv/versions/3.11.7/lib/python3.11/contextlib.py\", line 210, in __aenter__\n    return await anext(self.gen)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/social_media_api/main.py\", line 15, in lifespan\n    configure_logging()\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/social_media_api/logging_conf.py\", line 30, in configure_logging\n    dictConfig(\n  File \"/home/isetti/.pyenv/versions/3.11.7/lib/python3.11/logging/config.py\", line 823, in dictConfig\n    dictConfigClass(config).configure()\n  File \"/home/isetti/.pyenv/versions/3.11.7/lib/python3.11/logging/config.py\", line 629, in configure\n    raise ValueError('Unable to configure logger '\nValueError: Unable to configure logger 'social_media_api'\n"}
{"asctime": "2024-01-17T11:54:56", "msecs": 168.0, "levelname": "ERROR", "correlation_id": "-", "name": "uvicorn.error", "lineno": 57, "message": "Application startup failed. Exiting."}
{"asctime": "2024-01-17T11:55:41", "msecs": 79.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 60, "message": "Application startup complete."}
{"asctime": "2024-01-17T11:55:47", "msecs": 912.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 264, "message": "Shutting down"}
{"asctime": "2024-01-17T11:55:48", "msecs": 16.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 65, "message": "Waiting for application shutdown."}
{"asctime": "2024-01-17T11:55:48", "msecs": 19.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 76, "message": "Application shutdown complete."}
{"asctime": "2024-01-17T11:55:48", "msecs": 22.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 86, "message": "Finished server process [1655]", "color_message": "Finished server process [\u001b[36m%d\u001b[0m]"}
{"asctime": "2024-01-24T12:54:28", "msecs": 100.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 60, "message": "Application startup complete."}
{"asctime": "2024-01-24T13:01:41", "msecs": 325.0, "levelname": "DEBUG", "correlation_id": "2d0fbab6", "name": "social_media_api.security", "lineno": 88, "message": "Fetching user from the database", "email": "is*********@gmail.com"}
{"asctime": "2024-01-24T13:01:41", "msecs": 819.0, "levelname": "DEBUG", "correlation_id": "2d0fbab6", "name": "social_media_api.routers.user", "lineno": 31, "message": "INSERT INTO users (email, password, confirmed) VALUES (:email, :password, :confirmed)"}
{"asctime": "2024-01-24T13:01:41", "msecs": 868.0, "levelname": "DEBUG", "correlation_id": "2d0fbab6", "name": "social_media_api.security", "lineno": 47, "message": "Creating confirmation token", "email": "is*********@gmail.com"}
{"asctime": "2024-01-24T13:01:41", "msecs": 879.0, "levelname": "DEBUG", "correlation_id": "2d0fbab6", "name": "social_media_api.tasks", "lineno": 15, "message": "Sending email to 'ism' with subject 'Successfully signed '"}
{"asctime": "2024-01-24T13:01:42", "msecs": 162.0, "levelname": "INFO", "correlation_id": "2d0fbab6", "name": "uvicorn.access", "lineno": 496, "message": "127.0.0.1:60792 - \"POST /register HTTP/1.1\" 500"}
{"asctime": "2024-01-24T13:01:42", "msecs": 168.0, "levelname": "ERROR", "correlation_id": "2d0fbab6", "name": "uvicorn.error", "lineno": 431, "message": "Exception in ASGI application\n", "exc_info": "Traceback (most recent call last):\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py\", line 426, in run_asgi\n    result = await app(  # type: ignore[func-returns-value]\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py\", line 84, in __call__\n    return await self.app(scope, receive, send)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/fastapi/applications.py\", line 1054, in __call__\n    await super().__call__(scope, receive, send)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/applications.py\", line 116, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 186, in __call__\n    raise exc\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/asgi_correlation_id/middleware.py\", line 90, in __call__\n    await self.app(scope, receive, handle_outgoing_request)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 62, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 55, in wrapped_app\n    raise exc\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 44, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 746, in __call__\n    await route.handle(scope, receive, send)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 288, in handle\n    await self.app(scope, receive, send)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 75, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 55, in wrapped_app\n    raise exc\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 44, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 70, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 299, in app\n    raise e\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 294, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 191, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/social_media_api/routers/user.py\", line 34, in register_user\n    await tasks.send_user_registration_email(\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/social_media_api/tasks.py\", line 40, in send_user_registration_email\n    return await send_simple_email(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/social_media_api/tasks.py\", line 18, in send_simple_email\n    response = await client.post(\n               ^^^^^^^^^^^^^^^^^^\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/httpx/_client.py\", line 1877, in post\n    return await self.request(\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/httpx/_client.py\", line 1559, in request\n    return await self.send(request, auth=auth, follow_redirects=follow_redirects)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/httpx/_client.py\", line 1644, in send\n    auth = self._build_request_auth(request, auth)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/httpx/_client.py\", line 448, in _build_request_auth\n    self._auth if isinstance(auth, UseClientDefault) else self._build_auth(auth)\n                                                          ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/httpx/_client.py\", line 440, in _build_auth\n    raise TypeError(f'Invalid \"auth\" argument: {auth!r}')\nTypeError: Invalid \"auth\" argument: {'0b2d7307234a78d0c99d359778dd0541-063062da-35655e50', 'api'}"}
{"asctime": "2024-01-24T13:06:12", "msecs": 638.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 264, "message": "Shutting down"}
{"asctime": "2024-01-24T13:06:12", "msecs": 755.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 65, "message": "Waiting for application shutdown."}
{"asctime": "2024-01-24T13:06:12", "msecs": 795.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 76, "message": "Application shutdown complete."}
{"asctime": "2024-01-24T13:06:12", "msecs": 822.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 86, "message": "Finished server process [13524]", "color_message": "Finished server process [\u001b[36m%d\u001b[0m]"}
{"asctime": "2024-01-24T13:06:24", "msecs": 186.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 60, "message": "Application startup complete."}
{"asctime": "2024-01-24T13:06:24", "msecs": 201.0, "levelname": "DEBUG", "correlation_id": "ec1d46a9", "name": "social_media_api.security", "lineno": 88, "message": "Fetching user from the database", "email": "is*********@gmail.com"}
{"asctime": "2024-01-24T13:06:24", "msecs": 224.0, "levelname": "INFO", "correlation_id": "ec1d46a9", "name": "uvicorn.access", "lineno": 496, "message": "127.0.0.1:57130 - \"POST /register HTTP/1.1\" 400"}
{"asctime": "2024-01-24T13:06:54", "msecs": 591.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 264, "message": "Shutting down"}
{"asctime": "2024-01-24T13:06:54", "msecs": 695.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 65, "message": "Waiting for application shutdown."}
{"asctime": "2024-01-24T13:06:54", "msecs": 698.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 76, "message": "Application shutdown complete."}
{"asctime": "2024-01-24T13:06:54", "msecs": 701.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 86, "message": "Finished server process [15778]", "color_message": "Finished server process [\u001b[36m%d\u001b[0m]"}
{"asctime": "2024-01-24T13:07:34", "msecs": 613.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 60, "message": "Application startup complete."}
{"asctime": "2024-01-24T13:07:39", "msecs": 285.0, "levelname": "DEBUG", "correlation_id": "b442690f", "name": "social_media_api.security", "lineno": 88, "message": "Fetching user from the database", "email": "is*********@gmail.com"}
{"asctime": "2024-01-24T13:07:39", "msecs": 623.0, "levelname": "DEBUG", "correlation_id": "b442690f", "name": "social_media_api.routers.user", "lineno": 31, "message": "INSERT INTO users (email, password, confirmed) VALUES (:email, :password, :confirmed)"}
{"asctime": "2024-01-24T13:07:39", "msecs": 669.0, "levelname": "DEBUG", "correlation_id": "b442690f", "name": "social_media_api.security", "lineno": 47, "message": "Creating confirmation token", "email": "is*********@gmail.com"}
{"asctime": "2024-01-24T13:07:39", "msecs": 673.0, "levelname": "DEBUG", "correlation_id": "b442690f", "name": "social_media_api.tasks", "lineno": 15, "message": "Sending email to 'ism' with subject 'Successfully signed '"}
{"asctime": "2024-01-24T13:07:40", "msecs": 385.0, "levelname": "INFO", "correlation_id": "b442690f", "name": "uvicorn.access", "lineno": 496, "message": "127.0.0.1:47514 - \"POST /register HTTP/1.1\" 500"}
{"asctime": "2024-01-24T13:07:40", "msecs": 390.0, "levelname": "ERROR", "correlation_id": "b442690f", "name": "uvicorn.error", "lineno": 431, "message": "Exception in ASGI application\n", "exc_info": "Traceback (most recent call last):\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/social_media_api/tasks.py\", line 28, in send_simple_email\n    response.raise_for_status()\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/httpx/_models.py\", line 759, in raise_for_status\n    raise HTTPStatusError(message, request=request, response=self)\nhttpx.HTTPStatusError: Client error '404 Not Found' for url 'https://api.mailgun.net/v3/https://api.mailgun.net/v3/sandboxdda87ee443424facab85764efb0631aa.mailgun.org/messages'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py\", line 426, in run_asgi\n    result = await app(  # type: ignore[func-returns-value]\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py\", line 84, in __call__\n    return await self.app(scope, receive, send)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/fastapi/applications.py\", line 1054, in __call__\n    await super().__call__(scope, receive, send)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/applications.py\", line 116, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 186, in __call__\n    raise exc\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/asgi_correlation_id/middleware.py\", line 90, in __call__\n    await self.app(scope, receive, handle_outgoing_request)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 62, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 55, in wrapped_app\n    raise exc\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 44, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 746, in __call__\n    await route.handle(scope, receive, send)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 288, in handle\n    await self.app(scope, receive, send)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 75, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 55, in wrapped_app\n    raise exc\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 44, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 70, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 299, in app\n    raise e\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 294, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 191, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/social_media_api/routers/user.py\", line 34, in register_user\n    await tasks.send_user_registration_email(\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/social_media_api/tasks.py\", line 40, in send_user_registration_email\n    return await send_simple_email(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/social_media_api/tasks.py\", line 34, in send_simple_email\n    raise APIResponseError(\nsocial_media_api.tasks.APIResponseError: API request failed with status code 404"}
{"asctime": "2024-01-24T13:08:20", "msecs": 151.0, "levelname": "DEBUG", "correlation_id": "9721d5f4", "name": "social_media_api.security", "lineno": 88, "message": "Fetching user from the database", "email": "is*********@gmail.com"}
{"asctime": "2024-01-24T13:08:20", "msecs": 178.0, "levelname": "INFO", "correlation_id": "9721d5f4", "name": "uvicorn.access", "lineno": 496, "message": "127.0.0.1:52058 - \"POST /register HTTP/1.1\" 400"}
{"asctime": "2024-01-24T13:08:38", "msecs": 829.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 264, "message": "Shutting down"}
{"asctime": "2024-01-24T13:08:38", "msecs": 935.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 65, "message": "Waiting for application shutdown."}
{"asctime": "2024-01-24T13:08:38", "msecs": 939.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 76, "message": "Application shutdown complete."}
{"asctime": "2024-01-24T13:08:38", "msecs": 942.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 86, "message": "Finished server process [16101]", "color_message": "Finished server process [\u001b[36m%d\u001b[0m]"}
{"asctime": "2024-01-24T13:09:06", "msecs": 28.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 60, "message": "Application startup complete."}
{"asctime": "2024-01-24T13:09:39", "msecs": 830.0, "levelname": "DEBUG", "correlation_id": "fe5a5d2c", "name": "social_media_api.security", "lineno": 88, "message": "Fetching user from the database", "email": "is*********@gmail.com"}
{"asctime": "2024-01-24T13:09:40", "msecs": 183.0, "levelname": "DEBUG", "correlation_id": "fe5a5d2c", "name": "social_media_api.routers.user", "lineno": 31, "message": "INSERT INTO users (email, password, confirmed) VALUES (:email, :password, :confirmed)"}
{"asctime": "2024-01-24T13:09:40", "msecs": 230.0, "levelname": "DEBUG", "correlation_id": "fe5a5d2c", "name": "social_media_api.security", "lineno": 47, "message": "Creating confirmation token", "email": "is*********@gmail.com"}
{"asctime": "2024-01-24T13:09:40", "msecs": 234.0, "levelname": "DEBUG", "correlation_id": "fe5a5d2c", "name": "social_media_api.tasks", "lineno": 15, "message": "Sending email to 'ism' with subject 'Successfully signed '"}
{"asctime": "2024-01-24T13:09:40", "msecs": 911.0, "levelname": "INFO", "correlation_id": "fe5a5d2c", "name": "uvicorn.access", "lineno": 496, "message": "127.0.0.1:57118 - \"POST /register HTTP/1.1\" 500"}
{"asctime": "2024-01-24T13:09:40", "msecs": 915.0, "levelname": "ERROR", "correlation_id": "fe5a5d2c", "name": "uvicorn.error", "lineno": 431, "message": "Exception in ASGI application\n", "exc_info": "Traceback (most recent call last):\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/social_media_api/tasks.py\", line 28, in send_simple_email\n    response.raise_for_status()\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/httpx/_models.py\", line 759, in raise_for_status\n    raise HTTPStatusError(message, request=request, response=self)\nhttpx.HTTPStatusError: Client error '404 Not Found' for url 'https://api.mailgun.net/v3/https://api.mailgun.net/v3/sandboxdda87ee443424facab85764efb0631aa.mailgun.org/messages'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py\", line 426, in run_asgi\n    result = await app(  # type: ignore[func-returns-value]\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py\", line 84, in __call__\n    return await self.app(scope, receive, send)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/fastapi/applications.py\", line 1054, in __call__\n    await super().__call__(scope, receive, send)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/applications.py\", line 116, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 186, in __call__\n    raise exc\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/asgi_correlation_id/middleware.py\", line 90, in __call__\n    await self.app(scope, receive, handle_outgoing_request)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 62, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 55, in wrapped_app\n    raise exc\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 44, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 746, in __call__\n    await route.handle(scope, receive, send)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 288, in handle\n    await self.app(scope, receive, send)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 75, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 55, in wrapped_app\n    raise exc\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 44, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 70, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 299, in app\n    raise e\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 294, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 191, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/social_media_api/routers/user.py\", line 34, in register_user\n    await tasks.send_user_registration_email(\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/social_media_api/tasks.py\", line 40, in send_user_registration_email\n    return await send_simple_email(\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/social_media_api/tasks.py\", line 34, in send_simple_email\n    raise APIResponseError(\nsocial_media_api.tasks.APIResponseError: API request failed with status code 404"}
{"asctime": "2024-01-24T13:19:47", "msecs": 472.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 264, "message": "Shutting down"}
{"asctime": "2024-01-24T13:19:47", "msecs": 581.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 65, "message": "Waiting for application shutdown."}
{"asctime": "2024-01-24T13:19:47", "msecs": 586.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 76, "message": "Application shutdown complete."}
{"asctime": "2024-01-24T13:19:47", "msecs": 589.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 86, "message": "Finished server process [16570]", "color_message": "Finished server process [\u001b[36m%d\u001b[0m]"}
{"asctime": "2024-01-24T13:21:05", "msecs": 899.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 60, "message": "Application startup complete."}
{"asctime": "2024-01-24T13:21:12", "msecs": 628.0, "levelname": "DEBUG", "correlation_id": "054eb31b", "name": "social_media_api.security", "lineno": 88, "message": "Fetching user from the database", "email": "is*********@gmail.com"}
{"asctime": "2024-01-24T13:21:12", "msecs": 991.0, "levelname": "DEBUG", "correlation_id": "054eb31b", "name": "social_media_api.routers.user", "lineno": 31, "message": "INSERT INTO users (email, password, confirmed) VALUES (:email, :password, :confirmed)"}
{"asctime": "2024-01-24T13:21:13", "msecs": 42.0, "levelname": "DEBUG", "correlation_id": "054eb31b", "name": "social_media_api.security", "lineno": 47, "message": "Creating confirmation token", "email": "is*********@gmail.com"}
{"asctime": "2024-01-24T13:21:13", "msecs": 47.0, "levelname": "DEBUG", "correlation_id": "054eb31b", "name": "social_media_api.tasks", "lineno": 15, "message": "Sending email to 'ism' with subject 'Successfully signed '"}
{"asctime": "2024-01-24T13:21:13", "msecs": 691.0, "levelname": "DEBUG", "correlation_id": "054eb31b", "name": "social_media_api.tasks", "lineno": 30, "message": "b'{\"id\":\"<20240124122114.827112fac9887ce0@sandboxdda87ee443424facab85764efb0631aa.mailgun.org>\",\"message\":\"Queued. Thank you.\"}\\n'"}
{"asctime": "2024-01-24T13:21:13", "msecs": 698.0, "levelname": "INFO", "correlation_id": "054eb31b", "name": "uvicorn.access", "lineno": 496, "message": "127.0.0.1:50838 - \"POST /register HTTP/1.1\" 201"}
{"asctime": "2024-01-24T13:23:22", "msecs": 337.0, "levelname": "DEBUG", "correlation_id": "f6a1066a", "name": "social_media_api.routers.user", "lineno": 57, "message": "UPDATE users SET confirmed=:confirmed WHERE users.email = :email_1"}
{"asctime": "2024-01-24T13:23:22", "msecs": 390.0, "levelname": "INFO", "correlation_id": "f6a1066a", "name": "uvicorn.access", "lineno": 496, "message": "127.0.0.1:57924 - \"GET /confirm/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJpc21hZWxzZXR0aUBnbWFpbC5jb20iLCJleHAiOjE3MDYxODUyNzMsInR5cGUiOiJjb25maXJtYXRpb24ifQ.AfgtooFzKsBIzQhoiYa6nhQs77vpst9w1Et-lCT-Jy0 HTTP/1.1\" 200"}
{"asctime": "2024-01-24T13:24:05", "msecs": 737.0, "levelname": "DEBUG", "correlation_id": "631bf051", "name": "social_media_api.security", "lineno": 97, "message": "Authenticating user", "email": "is*********@gmail.com"}
{"asctime": "2024-01-24T13:24:05", "msecs": 747.0, "levelname": "DEBUG", "correlation_id": "631bf051", "name": "social_media_api.security", "lineno": 88, "message": "Fetching user from the database", "email": "is*********@gmail.com"}
{"asctime": "2024-01-24T13:24:06", "msecs": 11.0, "levelname": "DEBUG", "correlation_id": "631bf051", "name": "social_media_api.security", "lineno": 37, "message": "Creating access token", "email": "is*********@gmail.com"}
{"asctime": "2024-01-24T13:24:06", "msecs": 14.0, "levelname": "INFO", "correlation_id": "631bf051", "name": "uvicorn.access", "lineno": 496, "message": "127.0.0.1:40126 - \"POST /token HTTP/1.1\" 200"}
{"asctime": "2024-01-24T13:24:17", "msecs": 272.0, "levelname": "INFO", "correlation_id": "e8c97adb", "name": "uvicorn.access", "lineno": 496, "message": "127.0.0.1:34388 - \"POST /post HTTP/1.1\" 401"}
{"asctime": "2024-01-24T13:25:49", "msecs": 980.0, "levelname": "DEBUG", "correlation_id": "82efb24c", "name": "social_media_api.security", "lineno": 88, "message": "Fetching user from the database", "email": "is*********@gmail.com"}
{"asctime": "2024-01-24T13:25:50", "msecs": 5.0, "levelname": "INFO", "correlation_id": "82efb24c", "name": "social_media_api.routers.post", "lineno": 48, "message": "Creating post"}
{"asctime": "2024-01-24T13:25:50", "msecs": 16.0, "levelname": "DEBUG", "correlation_id": "82efb24c", "name": "social_media_api.routers.post", "lineno": 53, "message": "INSERT INTO posts (body, user_id) VALUES (:body, :user_id)"}
{"asctime": "2024-01-24T13:25:50", "msecs": 64.0, "levelname": "INFO", "correlation_id": "82efb24c", "name": "uvicorn.access", "lineno": 496, "message": "127.0.0.1:41462 - \"POST /post HTTP/1.1\" 201"}
{"asctime": "2024-01-24T13:26:19", "msecs": 560.0, "levelname": "DEBUG", "correlation_id": "0306486b", "name": "social_media_api.security", "lineno": 88, "message": "Fetching user from the database", "email": "is*********@gmail.com"}
{"asctime": "2024-01-24T13:26:19", "msecs": 577.0, "levelname": "INFO", "correlation_id": "0306486b", "name": "social_media_api.routers.post", "lineno": 86, "message": "Creating comment"}
{"asctime": "2024-01-24T13:26:19", "msecs": 581.0, "levelname": "INFO", "correlation_id": "0306486b", "name": "social_media_api.routers.post", "lineno": 35, "message": "Finding post with id 1"}
{"asctime": "2024-01-24T13:26:19", "msecs": 588.0, "levelname": "DEBUG", "correlation_id": "0306486b", "name": "social_media_api.routers.post", "lineno": 39, "message": "SELECT posts.id, posts.body, posts.user_id \nFROM posts \nWHERE posts.id = :id_1"}
{"asctime": "2024-01-24T13:26:19", "msecs": 617.0, "levelname": "DEBUG", "correlation_id": "0306486b", "name": "social_media_api.routers.post", "lineno": 95, "message": "INSERT INTO comments (body, post_id, user_id) VALUES (:body, :post_id, :user_id)"}
{"asctime": "2024-01-24T13:26:19", "msecs": 665.0, "levelname": "INFO", "correlation_id": "0306486b", "name": "uvicorn.access", "lineno": 496, "message": "127.0.0.1:49362 - \"POST /comment HTTP/1.1\" 201"}
{"asctime": "2024-01-24T13:27:23", "msecs": 804.0, "levelname": "INFO", "correlation_id": "c90141a2", "name": "social_media_api.routers.post", "lineno": 103, "message": "Getting comments on post"}
{"asctime": "2024-01-24T13:27:23", "msecs": 808.0, "levelname": "DEBUG", "correlation_id": "c90141a2", "name": "social_media_api.routers.post", "lineno": 107, "message": "SELECT comments.id, comments.body, comments.post_id, comments.user_id \nFROM comments \nWHERE comments.post_id = :post_id_1"}
{"asctime": "2024-01-24T13:27:23", "msecs": 837.0, "levelname": "INFO", "correlation_id": "c90141a2", "name": "uvicorn.access", "lineno": 496, "message": "127.0.0.1:33044 - \"GET /post/1/comment HTTP/1.1\" 200"}
{"asctime": "2024-01-24T13:29:42", "msecs": 110.0, "levelname": "INFO", "correlation_id": "7d4d4062", "name": "social_media_api.routers.post", "lineno": 67, "message": "Getting all posts"}
{"asctime": "2024-01-24T13:29:42", "msecs": 126.0, "levelname": "DEBUG", "correlation_id": "7d4d4062", "name": "social_media_api.routers.post", "lineno": 77, "message": "SELECT posts.id, posts.body, posts.user_id, count(likes.id) AS likes \nFROM posts LEFT OUTER JOIN likes ON posts.id = likes.post_id GROUP BY posts.id ORDER BY posts.id DESC"}
{"asctime": "2024-01-24T13:29:42", "msecs": 156.0, "levelname": "INFO", "correlation_id": "7d4d4062", "name": "uvicorn.access", "lineno": 496, "message": "127.0.0.1:57844 - \"GET /post HTTP/1.1\" 200"}
{"asctime": "2024-01-24T13:29:48", "msecs": 672.0, "levelname": "INFO", "correlation_id": "970652a5", "name": "social_media_api.routers.post", "lineno": 114, "message": "Getting post and its comments"}
{"asctime": "2024-01-24T13:29:48", "msecs": 676.0, "levelname": "DEBUG", "correlation_id": "970652a5", "name": "social_media_api.routers.post", "lineno": 118, "message": "SELECT posts.id, posts.body, posts.user_id, count(likes.id) AS likes \nFROM posts LEFT OUTER JOIN likes ON posts.id = likes.post_id \nWHERE posts.id = :id_1 GROUP BY posts.id"}
{"asctime": "2024-01-24T13:29:48", "msecs": 713.0, "levelname": "INFO", "correlation_id": "970652a5", "name": "social_media_api.routers.post", "lineno": 103, "message": "Getting comments on post"}
{"asctime": "2024-01-24T13:29:48", "msecs": 716.0, "levelname": "DEBUG", "correlation_id": "970652a5", "name": "social_media_api.routers.post", "lineno": 107, "message": "SELECT comments.id, comments.body, comments.post_id, comments.user_id \nFROM comments \nWHERE comments.post_id = :post_id_1"}
{"asctime": "2024-01-24T13:29:48", "msecs": 736.0, "levelname": "INFO", "correlation_id": "970652a5", "name": "uvicorn.access", "lineno": 496, "message": "127.0.0.1:56196 - \"GET /post/1 HTTP/1.1\" 200"}
{"asctime": "2024-01-24T13:32:42", "msecs": 812.0, "levelname": "DEBUG", "correlation_id": "270879c5", "name": "social_media_api.security", "lineno": 88, "message": "Fetching user from the database", "email": "is*********@gmail.com"}
{"asctime": "2024-01-24T13:32:42", "msecs": 846.0, "levelname": "INFO", "correlation_id": "270879c5", "name": "social_media_api.routers.post", "lineno": 134, "message": "Liking post"}
{"asctime": "2024-01-24T13:32:42", "msecs": 849.0, "levelname": "INFO", "correlation_id": "270879c5", "name": "social_media_api.routers.post", "lineno": 35, "message": "Finding post with id 1"}
{"asctime": "2024-01-24T13:32:42", "msecs": 853.0, "levelname": "DEBUG", "correlation_id": "270879c5", "name": "social_media_api.routers.post", "lineno": 39, "message": "SELECT posts.id, posts.body, posts.user_id \nFROM posts \nWHERE posts.id = :id_1"}
{"asctime": "2024-01-24T13:32:42", "msecs": 872.0, "levelname": "DEBUG", "correlation_id": "270879c5", "name": "social_media_api.routers.post", "lineno": 143, "message": "INSERT INTO likes (post_id, user_id) VALUES (:post_id, :user_id)"}
{"asctime": "2024-01-24T13:32:42", "msecs": 935.0, "levelname": "INFO", "correlation_id": "270879c5", "name": "uvicorn.access", "lineno": 496, "message": "127.0.0.1:35162 - \"POST /like HTTP/1.1\" 201"}
{"asctime": "2024-01-24T13:32:53", "msecs": 639.0, "levelname": "INFO", "correlation_id": "0ab5cafa", "name": "social_media_api.routers.post", "lineno": 67, "message": "Getting all posts"}
{"asctime": "2024-01-24T13:32:53", "msecs": 642.0, "levelname": "DEBUG", "correlation_id": "0ab5cafa", "name": "social_media_api.routers.post", "lineno": 77, "message": "SELECT posts.id, posts.body, posts.user_id, count(likes.id) AS likes \nFROM posts LEFT OUTER JOIN likes ON posts.id = likes.post_id GROUP BY posts.id ORDER BY posts.id DESC"}
{"asctime": "2024-01-24T13:32:53", "msecs": 665.0, "levelname": "INFO", "correlation_id": "0ab5cafa", "name": "uvicorn.access", "lineno": 496, "message": "127.0.0.1:58832 - \"GET /post HTTP/1.1\" 200"}
{"asctime": "2024-01-24T13:32:56", "msecs": 715.0, "levelname": "INFO", "correlation_id": "6bb112af", "name": "social_media_api.routers.post", "lineno": 114, "message": "Getting post and its comments"}
{"asctime": "2024-01-24T13:32:56", "msecs": 718.0, "levelname": "DEBUG", "correlation_id": "6bb112af", "name": "social_media_api.routers.post", "lineno": 118, "message": "SELECT posts.id, posts.body, posts.user_id, count(likes.id) AS likes \nFROM posts LEFT OUTER JOIN likes ON posts.id = likes.post_id \nWHERE posts.id = :id_1 GROUP BY posts.id"}
{"asctime": "2024-01-24T13:32:56", "msecs": 748.0, "levelname": "INFO", "correlation_id": "6bb112af", "name": "social_media_api.routers.post", "lineno": 103, "message": "Getting comments on post"}
{"asctime": "2024-01-24T13:32:56", "msecs": 753.0, "levelname": "DEBUG", "correlation_id": "6bb112af", "name": "social_media_api.routers.post", "lineno": 107, "message": "SELECT comments.id, comments.body, comments.post_id, comments.user_id \nFROM comments \nWHERE comments.post_id = :post_id_1"}
{"asctime": "2024-01-24T13:32:56", "msecs": 774.0, "levelname": "INFO", "correlation_id": "6bb112af", "name": "uvicorn.access", "lineno": 496, "message": "127.0.0.1:58832 - \"GET /post/1 HTTP/1.1\" 200"}
{"asctime": "2024-01-24T13:33:06", "msecs": 982.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 264, "message": "Shutting down"}
{"asctime": "2024-01-24T13:33:07", "msecs": 90.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 65, "message": "Waiting for application shutdown."}
{"asctime": "2024-01-24T13:33:07", "msecs": 97.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 76, "message": "Application shutdown complete."}
{"asctime": "2024-01-24T13:33:07", "msecs": 102.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 86, "message": "Finished server process [18987]", "color_message": "Finished server process [\u001b[36m%d\u001b[0m]"}
{"asctime": "2024-01-26T11:27:11", "msecs": 377.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 60, "message": "Application startup complete."}
{"asctime": "2024-01-26T11:27:30", "msecs": 369.0, "levelname": "DEBUG", "correlation_id": "2c12a99d", "name": "social_media_api.security", "lineno": 97, "message": "Authenticating user", "email": "is*********@gmail.com"}
{"asctime": "2024-01-26T11:27:30", "msecs": 372.0, "levelname": "DEBUG", "correlation_id": "2c12a99d", "name": "social_media_api.security", "lineno": 88, "message": "Fetching user from the database", "email": "is*********@gmail.com"}
{"asctime": "2024-01-26T11:27:30", "msecs": 400.0, "levelname": "INFO", "correlation_id": "2c12a99d", "name": "uvicorn.access", "lineno": 496, "message": "127.0.0.1:43168 - \"POST /token HTTP/1.1\" 401"}
{"asctime": "2024-01-26T11:27:35", "msecs": 972.0, "levelname": "DEBUG", "correlation_id": "ddb93c6a", "name": "social_media_api.security", "lineno": 88, "message": "Fetching user from the database", "email": "is*********@gmail.com"}
{"asctime": "2024-01-26T11:27:36", "msecs": 330.0, "levelname": "DEBUG", "correlation_id": "ddb93c6a", "name": "social_media_api.routers.user", "lineno": 31, "message": "INSERT INTO users (email, password, confirmed) VALUES (:email, :password, :confirmed)"}
{"asctime": "2024-01-26T11:27:36", "msecs": 382.0, "levelname": "DEBUG", "correlation_id": "ddb93c6a", "name": "social_media_api.security", "lineno": 47, "message": "Creating confirmation token", "email": "is*********@gmail.com"}
{"asctime": "2024-01-26T11:27:36", "msecs": 389.0, "levelname": "INFO", "correlation_id": "ddb93c6a", "name": "uvicorn.access", "lineno": 496, "message": "127.0.0.1:56310 - \"POST /register HTTP/1.1\" 201"}
{"asctime": "2024-01-26T11:27:36", "msecs": 394.0, "levelname": "DEBUG", "correlation_id": "ddb93c6a", "name": "social_media_api.tasks", "lineno": 18, "message": "Sending email to 'ism' with subject 'Successfully signed '"}
{"asctime": "2024-01-26T11:27:37", "msecs": 338.0, "levelname": "DEBUG", "correlation_id": "ddb93c6a", "name": "social_media_api.tasks", "lineno": 33, "message": "b'{\"id\":\"<20240126102738.0d07a2b65533039f@sandboxdda87ee443424facab85764efb0631aa.mailgun.org>\",\"message\":\"Queued. Thank you.\"}\\n'"}
{"asctime": "2024-01-26T11:28:40", "msecs": 462.0, "levelname": "DEBUG", "correlation_id": "c5c4c014", "name": "social_media_api.routers.user", "lineno": 58, "message": "UPDATE users SET confirmed=:confirmed WHERE users.email = :email_1"}
{"asctime": "2024-01-26T11:28:40", "msecs": 547.0, "levelname": "INFO", "correlation_id": "c5c4c014", "name": "uvicorn.access", "lineno": 496, "message": "127.0.0.1:41482 - \"GET /confirm/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJpc21hZWxzZXR0aUBnbWFpbC5jb20iLCJleHAiOjE3MDYzNTEyNTYsInR5cGUiOiJjb25maXJtYXRpb24ifQ.w7ZhfgyX0jx4vKN1teeyJ3gbje7Xoh9PqNi_elsYHU4 HTTP/1.1\" 200"}
{"asctime": "2024-01-26T11:28:40", "msecs": 777.0, "levelname": "INFO", "correlation_id": "87235de2", "name": "uvicorn.access", "lineno": 496, "message": "127.0.0.1:41482 - \"GET /favicon.ico HTTP/1.1\" 404"}
{"asctime": "2024-01-26T11:28:50", "msecs": 87.0, "levelname": "DEBUG", "correlation_id": "1b865ada", "name": "social_media_api.security", "lineno": 97, "message": "Authenticating user", "email": "is*********@gmail.com"}
{"asctime": "2024-01-26T11:28:50", "msecs": 89.0, "levelname": "DEBUG", "correlation_id": "1b865ada", "name": "social_media_api.security", "lineno": 88, "message": "Fetching user from the database", "email": "is*********@gmail.com"}
{"asctime": "2024-01-26T11:28:50", "msecs": 333.0, "levelname": "DEBUG", "correlation_id": "1b865ada", "name": "social_media_api.security", "lineno": 37, "message": "Creating access token", "email": "is*********@gmail.com"}
{"asctime": "2024-01-26T11:28:50", "msecs": 336.0, "levelname": "INFO", "correlation_id": "1b865ada", "name": "uvicorn.access", "lineno": 496, "message": "127.0.0.1:41648 - \"POST /token HTTP/1.1\" 200"}
{"asctime": "2024-01-26T11:31:10", "msecs": 448.0, "levelname": "DEBUG", "correlation_id": "6c3e1dc2", "name": "social_media_api.security", "lineno": 88, "message": "Fetching user from the database", "email": "is*********@gmail.com"}
{"asctime": "2024-01-26T11:31:10", "msecs": 476.0, "levelname": "INFO", "correlation_id": "6c3e1dc2", "name": "social_media_api.routers.post", "lineno": 53, "message": "Creating post"}
{"asctime": "2024-01-26T11:31:10", "msecs": 481.0, "levelname": "DEBUG", "correlation_id": "6c3e1dc2", "name": "social_media_api.routers.post", "lineno": 58, "message": "INSERT INTO posts (body, user_id) VALUES (:body, :user_id)"}
{"asctime": "2024-01-26T11:31:10", "msecs": 530.0, "levelname": "INFO", "correlation_id": "6c3e1dc2", "name": "uvicorn.access", "lineno": 496, "message": "127.0.0.1:43254 - \"POST /post?prompt=A%20cute%20cat HTTP/1.1\" 201"}
{"asctime": "2024-01-26T11:31:10", "msecs": 535.0, "levelname": "DEBUG", "correlation_id": "6c3e1dc2", "name": "social_media_api.tasks", "lineno": 55, "message": "Generating cute creature"}
{"asctime": "2024-01-26T11:31:11", "msecs": 470.0, "levelname": "DEBUG", "correlation_id": "6c3e1dc2", "name": "social_media_api.tasks", "lineno": 18, "message": "Sending email to 'ism' with subject 'Error generating ima'"}
{"asctime": "2024-01-26T11:31:12", "msecs": 356.0, "levelname": "DEBUG", "correlation_id": "6c3e1dc2", "name": "social_media_api.tasks", "lineno": 33, "message": "b'{\"id\":\"<20240126103113.3974599af60a61df@sandboxdda87ee443424facab85764efb0631aa.mailgun.org>\",\"message\":\"Queued. Thank you.\"}\\n'"}
{"asctime": "2024-01-26T11:43:06", "msecs": 73.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 264, "message": "Shutting down"}
{"asctime": "2024-01-26T11:43:06", "msecs": 177.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 65, "message": "Waiting for application shutdown."}
{"asctime": "2024-01-26T11:43:06", "msecs": 180.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 76, "message": "Application shutdown complete."}
{"asctime": "2024-01-26T11:43:06", "msecs": 183.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 86, "message": "Finished server process [7126]", "color_message": "Finished server process [\u001b[36m%d\u001b[0m]"}
{"asctime": "2024-01-26T11:43:21", "msecs": 301.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 60, "message": "Application startup complete."}
{"asctime": "2024-01-26T11:44:05", "msecs": 711.0, "levelname": "DEBUG", "correlation_id": "092fe163", "name": "social_media_api.security", "lineno": 88, "message": "Fetching user from the database", "email": "is*********@gmail.com"}
{"asctime": "2024-01-26T11:44:05", "msecs": 732.0, "levelname": "INFO", "correlation_id": "092fe163", "name": "social_media_api.routers.post", "lineno": 53, "message": "Creating post"}
{"asctime": "2024-01-26T11:44:05", "msecs": 736.0, "levelname": "DEBUG", "correlation_id": "092fe163", "name": "social_media_api.routers.post", "lineno": 58, "message": "INSERT INTO posts (body, user_id) VALUES (:body, :user_id)"}
{"asctime": "2024-01-26T11:44:05", "msecs": 781.0, "levelname": "INFO", "correlation_id": "092fe163", "name": "uvicorn.access", "lineno": 496, "message": "127.0.0.1:56652 - \"POST /post?prompt=A%20creepy%20cat HTTP/1.1\" 201"}
{"asctime": "2024-01-26T11:44:05", "msecs": 784.0, "levelname": "DEBUG", "correlation_id": "092fe163", "name": "social_media_api.tasks", "lineno": 55, "message": "Generating cute creature"}
{"asctime": "2024-01-26T11:44:06", "msecs": 769.0, "levelname": "ERROR", "correlation_id": "092fe163", "name": "social_media_api.tasks", "lineno": 70, "message": "Client error '401 Unauthorized' for url 'https://api.deepai.org/api/cute-creature-generator'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401"}
{"asctime": "2024-01-26T11:44:06", "msecs": 773.0, "levelname": "DEBUG", "correlation_id": "092fe163", "name": "social_media_api.tasks", "lineno": 18, "message": "Sending email to 'ism' with subject 'Error generating ima'"}
{"asctime": "2024-01-26T11:44:07", "msecs": 324.0, "levelname": "DEBUG", "correlation_id": "092fe163", "name": "social_media_api.tasks", "lineno": 33, "message": "b'{\"id\":\"<20240126104408.581fb625d7c596e5@sandboxdda87ee443424facab85764efb0631aa.mailgun.org>\",\"message\":\"Queued. Thank you.\"}\\n'"}
{"asctime": "2024-01-26T11:51:01", "msecs": 60.0, "levelname": "DEBUG", "correlation_id": "e50ab22d", "name": "social_media_api.security", "lineno": 88, "message": "Fetching user from the database", "email": "is*********@gmail.com"}
{"asctime": "2024-01-26T11:51:01", "msecs": 89.0, "levelname": "INFO", "correlation_id": "e50ab22d", "name": "social_media_api.routers.post", "lineno": 53, "message": "Creating post"}
{"asctime": "2024-01-26T11:51:01", "msecs": 92.0, "levelname": "DEBUG", "correlation_id": "e50ab22d", "name": "social_media_api.routers.post", "lineno": 58, "message": "INSERT INTO posts (body, user_id) VALUES (:body, :user_id)"}
{"asctime": "2024-01-26T11:51:01", "msecs": 130.0, "levelname": "INFO", "correlation_id": "e50ab22d", "name": "uvicorn.access", "lineno": 496, "message": "127.0.0.1:52234 - \"POST /post HTTP/1.1\" 201"}
{"asctime": "2024-01-26T11:51:12", "msecs": 469.0, "levelname": "INFO", "correlation_id": "9264a207", "name": "social_media_api.routers.post", "lineno": 82, "message": "Getting all posts"}
{"asctime": "2024-01-26T11:51:12", "msecs": 473.0, "levelname": "DEBUG", "correlation_id": "9264a207", "name": "social_media_api.routers.post", "lineno": 92, "message": "SELECT posts.id, posts.body, posts.user_id, posts.image_url, count(likes.id) AS likes \nFROM posts LEFT OUTER JOIN likes ON posts.id = likes.post_id GROUP BY posts.id ORDER BY posts.id DESC"}
{"asctime": "2024-01-26T11:51:12", "msecs": 499.0, "levelname": "INFO", "correlation_id": "9264a207", "name": "uvicorn.access", "lineno": 496, "message": "127.0.0.1:50292 - \"GET /post HTTP/1.1\" 200"}
{"asctime": "2024-01-26T12:34:52", "msecs": 666.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 264, "message": "Shutting down"}
{"asctime": "2024-01-26T12:34:52", "msecs": 858.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 65, "message": "Waiting for application shutdown."}
{"asctime": "2024-01-26T12:34:52", "msecs": 885.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 76, "message": "Application shutdown complete."}
{"asctime": "2024-01-26T12:34:52", "msecs": 891.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 86, "message": "Finished server process [10354]", "color_message": "Finished server process [\u001b[36m%d\u001b[0m]"}
{"asctime": "2024-01-26T20:40:07", "msecs": 172.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 60, "message": "Application startup complete."}
{"asctime": "2024-01-26T20:40:07", "msecs": 182.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 218, "message": "Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)", "color_message": "Uvicorn running on \u001b[1m%s://%s:%d\u001b[0m (Press CTRL+C to quit)"}
{"asctime": "2024-01-26T20:43:30", "msecs": 969.0, "levelname": "WARNING", "correlation_id": "-", "name": "uvicorn.error", "lineno": 189, "message": "Invalid HTTP request received."}
{"asctime": "2024-01-26T20:45:07", "msecs": 902.0, "levelname": "INFO", "correlation_id": "35887fe4", "name": "uvicorn.access", "lineno": 496, "message": "127.0.0.1:52332 - \"GET /sentry-debug HTTP/1.1\" 500"}
{"asctime": "2024-01-26T20:45:08", "msecs": 734.0, "levelname": "ERROR", "correlation_id": "35887fe4", "name": "uvicorn.error", "lineno": 431, "message": "Exception in ASGI application\n", "exc_info": "Traceback (most recent call last):\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py\", line 426, in run_asgi\n    result = await app(  # type: ignore[func-returns-value]\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py\", line 84, in __call__\n    return await self.app(scope, receive, send)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/fastapi/applications.py\", line 1054, in __call__\n    await super().__call__(scope, receive, send)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/sentry_sdk/integrations/starlette.py\", line 364, in _sentry_patched_asgi_app\n    return await middleware(scope, receive, send)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/sentry_sdk/integrations/asgi.py\", line 146, in _run_asgi3\n    return await self._run_app(scope, receive, send, asgi_version=3)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/sentry_sdk/integrations/asgi.py\", line 241, in _run_app\n    raise exc from None\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/sentry_sdk/integrations/asgi.py\", line 234, in _run_app\n    return await self.app(\n           ^^^^^^^^^^^^^^^\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/applications.py\", line 116, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/sentry_sdk/integrations/starlette.py\", line 157, in _create_span_call\n    return await old_call(app, scope, new_receive, new_send, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 186, in __call__\n    raise exc\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/sentry_sdk/integrations/starlette.py\", line 157, in _create_span_call\n    return await old_call(app, scope, new_receive, new_send, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/asgi_correlation_id/middleware.py\", line 90, in __call__\n    await self.app(scope, receive, handle_outgoing_request)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/sentry_sdk/integrations/starlette.py\", line 256, in _sentry_exceptionmiddleware_call\n    await old_call(self, scope, receive, send)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/sentry_sdk/integrations/starlette.py\", line 157, in _create_span_call\n    return await old_call(app, scope, new_receive, new_send, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 62, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 55, in wrapped_app\n    raise exc\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 44, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 746, in __call__\n    await route.handle(scope, receive, send)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 288, in handle\n    await self.app(scope, receive, send)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 75, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 55, in wrapped_app\n    raise exc\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 44, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/starlette/routing.py\", line 70, in app\n    response = await func(request)\n               ^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/sentry_sdk/integrations/fastapi.py\", line 136, in _sentry_app\n    return await old_app(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 299, in app\n    raise e\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 294, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/.venv/lib/python3.11/site-packages/fastapi/routing.py\", line 191, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/mnt/c/Users/ismae/OneDrive/Trainings/FastAPI/Mastering REST APIs with FastAPI/social_media_api/main.py\", line 54, in trigger_error\n    division_by_zero = 1 / 0\n                       ~~^~~\nZeroDivisionError: division by zero"}
{"asctime": "2024-01-26T20:47:58", "msecs": 191.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 264, "message": "Shutting down"}
{"asctime": "2024-01-26T20:47:58", "msecs": 297.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 65, "message": "Waiting for application shutdown."}
{"asctime": "2024-01-26T20:47:58", "msecs": 301.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 76, "message": "Application shutdown complete."}
{"asctime": "2024-01-26T20:47:58", "msecs": 305.0, "levelname": "INFO", "correlation_id": "-", "name": "uvicorn.error", "lineno": 86, "message": "Finished server process [73079]", "color_message": "Finished server process [\u001b[36m%d\u001b[0m]"}
